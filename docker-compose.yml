services:
  postgres:
    image: postgres:15
    container_name: postgres_db_contacts
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: contacts_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: always

  # üöÄ –ù–û–í–´–ô –°–ï–†–í–ò–° –î–õ–Ø –ù–ê–®–ï–ì–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
  web:
    # –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑ –∏–∑ Dockerfile –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ
    build: .
    container_name: fastapi_app_contacts
    # –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ—Ä—Ç, —á—Ç–æ–±—ã API –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω —Å–Ω–∞—Ä—É–∂–∏
    ports:
      - "8000:8000"
    # üîó –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –Ω–∞—à —Å–µ—Ä–≤–∏—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç postgres.
    # Docker Compose —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∞ –ø–æ—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
    depends_on:
      - postgres

volumes:
  postgres_data: